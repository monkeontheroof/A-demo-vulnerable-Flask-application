{% extends "base.html" %} {% block title %}Note{% endblock %} 
{% block content %}
<div class="container mt-5">
    <h2>Edit Note</h2>
    <form id="editNoteForm">
      <div class="mb-3">
        <input type="hidden" class="form-control" id="date" name="date" value="{{ note.date }}" readonly>
      </div>
      <div class="mb-3">
        <label for="noteData" class="form-label">Note Data</label>
        <textarea class="form-control" id="data" name="data" rows="5" required>{{ note.data }}</textarea>
      </div>
      <button type="button" class="btn btn-primary" onclick="submitForm()"><i class="fas fa-save"></i> Save Changes</button>
      <a href="/" class="btn btn-secondary"><i class="fas fa-arrow-left"></i> Cancel</a>
    </form>
</div>
<script>
    function submitForm() {      
      // Collect the form data
      const formData = {
        date: document.getElementById('date').value,
        data: document.getElementById('data').value
      };

      // Send the data as JSON to the server
      fetch('/note/{{ note.id }}', {
        method: 'POST', // Or PUT, based on your API
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(formData)
      })
      .then((_res) => {
        window.location.href = "/note/{{ note.id }}";
    });
    };
</script>
{% endblock %}